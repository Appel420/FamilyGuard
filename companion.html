<!DOCTYPE html>
<html>
<head>
<title>Companion - Screen Capture</title>
</head>
<body>
<button id="capture">Capture Screen</button>
<canvas id="canvas" style="display:none;"></canvas>
<script>
document.getElementById('capture').onclick = async () => {
  const stream = await navigator.mediaDevices.getDisplayMedia();
  const video = document.createElement('video');
  video.srcObject = stream;
  video.onloadedmetadata = () => {
    video.play();
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0);
    const dataURL = canvas.toDataURL();
    localStorage.setItem('screenCapture', dataURL);
    alert('Screen captured and stored locally.');
    stream.getTracks().forEach(track => track.stop());
  };
};
</script>
</body>
</html>