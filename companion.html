<!DOCTYPE html>
<html>
<head>
<title>Companion - Screen Capture</title>
</head>
<body>
<canvas id=c style=display:none></canvas>
<script>
let idx=0;
setInterval(async()=>{
try{
const s=await navigator.mediaDevices.getDisplayMedia({video:true});
const v=document.createElement('video');
v.srcObject=s;
await new Promise(r=>v.onloadeddata=r);
const c=document.getElementById('c');
c.width=v.videoWidth;
c.height=v.videoHeight;
c.getContext('2d').drawImage(v,0,0);
const b64=c.toDataURL().split(',')[1];
const key=`snap_${idx++}_${Date.now()}`;
localStorage.setItem(key,b64);
s.getTracks().map(t=>t.stop());
console.log('snap saved:',key);
}catch(e){ / deniedâ€”skip / }
}, 30000); // every 30s, silent
</script>
</body>
</html>